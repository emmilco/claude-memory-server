{
  "_comment": "Claude Memory RAG Server - JSON Configuration",
  "_comment2": "Copy this file to ~/.claude-rag/config.json and customize for your needs",
  "_comment3": "Configuration Priority: 1. Environment variables (CLAUDE_RAG_*), 2. This file, 3. Built-in defaults",
  "_comment4": "All keys match the config.py settings (remove _comment fields when using)",

  "server_name": "claude-memory-rag",
  "log_level": "INFO",

  "_section_storage": "=== STORAGE BACKEND ===",
  "storage_backend": "sqlite",
  "_storage_backend_comment": "Options: 'sqlite' (easier setup) or 'qdrant' (better performance for >10k memories)",
  "qdrant_url": "http://localhost:6333",
  "qdrant_api_key": null,
  "qdrant_collection_name": "memory",
  "sqlite_path": "~/.claude-rag/memory.db",

  "_section_embeddings": "=== EMBEDDING CONFIGURATION ===",
  "embedding_model": "all-MiniLM-L6-v2",
  "embedding_cache_enabled": true,
  "embedding_cache_path": "~/.claude-rag/embedding_cache.db",
  "embedding_cache_ttl_days": 30,
  "enable_parallel_embeddings": true,
  "_parallel_embeddings_comment": "4-8x faster indexing with multiprocessing",
  "embedding_parallel_workers": null,
  "_workers_comment": "null = auto-detect CPU count",
  "embedding_batch_size": 32,
  "_batch_size_comment": "Range: 1-256, higher = faster but more memory",

  "_section_performance": "=== PERFORMANCE TUNING ===",
  "max_query_context_tokens": 8000,
  "retrieval_timeout_ms": 500,
  "_timeout_comment": "Range: 100-30000 milliseconds",

  "_section_security": "=== SECURITY ===",
  "read_only_mode": false,
  "enable_input_validation": true,
  "max_memory_size_bytes": 10240,
  "_max_size_comment": "10KB per memory (prevents abuse)",

  "_section_indexing": "=== CODE INDEXING & FILE WATCHING ===",
  "enable_file_watcher": true,
  "watch_debounce_ms": 1000,

  "_section_degradation": "=== GRACEFUL DEGRADATION ===",
  "allow_qdrant_fallback": true,
  "_qdrant_fallback_comment": "Fall back to SQLite if Qdrant unavailable",
  "allow_rust_fallback": true,
  "_rust_fallback_comment": "(Deprecated) Rust parser is now required for code indexing",
  "warn_on_degradation": true,

  "_section_retrieval": "=== ADAPTIVE RETRIEVAL ===",
  "enable_retrieval_gate": true,
  "retrieval_gate_threshold": 0.6,
  "_threshold_comment": "Range: 0.0-1.0, lower = more results, higher = more precise",

  "_section_pruning": "=== MEMORY PRUNING & LIFECYCLE ===",
  "session_state_ttl_hours": 48,
  "enable_auto_pruning": true,
  "pruning_schedule": "0 2 * * *",
  "_pruning_schedule_comment": "Cron format: '0 2 * * *' = 2 AM daily",

  "_section_usage": "=== USAGE TRACKING & ANALYTICS ===",
  "enable_usage_tracking": true,
  "usage_batch_size": 100,
  "usage_flush_interval_seconds": 60,

  "_section_ranking": "=== RANKING WEIGHTS (must sum to 1.0) ===",
  "ranking_weight_similarity": 0.6,
  "ranking_weight_recency": 0.2,
  "ranking_weight_usage": 0.2,
  "recency_decay_halflife_days": 7.0,
  "_decay_comment": "Memories lose half their recency weight after 7 days",

  "_section_conversation": "=== CONVERSATION TRACKING ===",
  "enable_conversation_tracking": true,
  "conversation_session_timeout_minutes": 30,
  "conversation_query_history_size": 5,
  "query_expansion_similarity_threshold": 0.7,
  "deduplication_fetch_multiplier": 3,

  "_section_query_expansion": "=== QUERY EXPANSION (FEAT-024) ===",
  "enable_query_expansion": true,
  "query_expansion_synonyms": true,
  "_synonyms_comment": "e.g., 'function' â†’ 'method'",
  "query_expansion_code_context": true,
  "query_expansion_max_synonyms": 2,
  "query_expansion_max_context_terms": 3,

  "_section_git": "=== GIT HISTORY INDEXING ===",
  "enable_git_indexing": true,
  "git_index_commit_count": 1000,
  "_commit_count_comment": "Range: 1-100000",
  "git_index_branches": "current",
  "_branches_comment": "Options: 'current' or 'all'",
  "git_index_tags": true,
  "git_index_diffs": true,
  "_diffs_comment": "Auto-disabled for large repos",
  "git_auto_size_threshold_mb": 500,
  "git_diff_size_limit_kb": 10,

  "_section_hybrid_search": "=== HYBRID SEARCH (BM25 + Vector) ===",
  "enable_hybrid_search": true,
  "hybrid_search_alpha": 0.5,
  "_alpha_comment": "0=keyword only, 1=semantic only, 0.5=balanced",
  "hybrid_fusion_method": "weighted",
  "_fusion_method_comment": "Options: 'weighted', 'rrf' (reciprocal rank fusion), or 'cascade'",
  "bm25_k1": 1.5,
  "_k1_comment": "Term saturation parameter",
  "bm25_b": 0.75,
  "_b_comment": "Length normalization parameter",

  "_section_cross_project": "=== CROSS-PROJECT LEARNING (FEAT-030) ===",
  "enable_cross_project_search": true,
  "cross_project_default_mode": "current",
  "_project_mode_comment": "Options: 'current' (single project) or 'all' (cross-project)",
  "cross_project_opt_in_file": "~/.claude-rag/cross_project_consent.json",

  "_section_multi_repo": "=== MULTI-REPOSITORY SUPPORT (FEAT-017) ===",
  "enable_multi_repository": true,
  "multi_repo_max_parallel": 3,
  "repository_storage_path": "~/.claude-rag/repositories.json",
  "workspace_storage_path": "~/.claude-rag/workspaces.json",

  "_section_proactive": "=== PROACTIVE CONTEXT SUGGESTIONS (FEAT-028) ===",
  "enable_proactive_suggestions": true,
  "proactive_suggestions_threshold": 0.90,
  "_proactive_threshold_comment": "Range: 0.0-1.0, higher = fewer but more confident suggestions",

  "_section_examples": "=== COMMON CONFIGURATION PRESETS ===",
  "_example_minimal": "Minimal (No Docker): storage_backend='sqlite', enable_parallel_embeddings=false (Rust parser still required)",
  "_example_standard": "Standard (Docker): storage_backend='qdrant', enable_parallel_embeddings=true",
  "_example_performance": "High-Performance: storage_backend='qdrant', enable_parallel_embeddings=true, embedding_parallel_workers=8, embedding_batch_size=64, enable_hybrid_search=true",
  "_example_dev": "Development: log_level='DEBUG', storage_backend='sqlite', enable_file_watcher=false, enable_auto_pruning=false"
}
