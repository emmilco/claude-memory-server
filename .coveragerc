[run]
source = src
omit =
    # Legacy/deprecated files (old architecture)
    src/database.py
    src/doc_ingestion.py
    src/embeddings.py
    src/memory.py
    src/router.py
    src/mcp_server.py
    # Test files
    tests/*
    # Init files
    */__init__.py

    # === Files impractical to test (Nov 17, 2025) ===
    # These files are excluded from coverage statistics because they require
    # terminal interaction, UI mocking, or are thin CLI wrappers over tested core logic.

    # Interactive TUI applications
    src/cli/memory_browser.py         # Interactive terminal UI - requires Rich/Textual mocking
    src/cli/health_monitor_command.py # Interactive real-time monitoring - requires terminal I/O

    # CLI command wrappers (thin layers over well-tested core functionality)
    src/cli/lifecycle_command.py      # Wraps lifecycle_manager.py (98% coverage)
    src/cli/archival_command.py       # Wraps project_archival.py (83% coverage)
    src/cli/consolidate_command.py    # Wraps consolidation_engine.py (64% coverage)
    src/cli/prune_command.py          # Wraps pruner.py (64% coverage)
    src/cli/verify_command.py         # Validation CLI - mostly argparse config
    src/cli/git_index_command.py      # Wraps git_indexer.py (89% coverage)
    src/cli/git_search_command.py     # Wraps search functionality (99% coverage)
    src/cli/analytics_command.py      # Wraps token_tracker.py (96% coverage)
    src/cli/__main__.py               # Entry point only - no business logic

    # Background job schedulers
    src/memory/consolidation_jobs.py  # Scheduler for consolidation - engines are tested

    # Infrastructure utilities
    src/core/security_logger.py       # Logging-only utility - no testable business logic

    # FFI and external integrations
    src/embeddings/rust_bridge.py     # Rust FFI bridge - tested via Rust unit tests

[report]
exclude_lines =
    # Standard pragma
    pragma: no cover
    # Don't complain about missing debug-only code
    def __repr__
    # Don't complain if tests don't hit defensive assertion code
    raise AssertionError
    raise NotImplementedError
    # Don't complain if non-runnable code isn't run
    if __name__ == .__main__.:
    # Type checking
    if TYPE_CHECKING:
    @overload

precision = 2
show_missing = True
skip_covered = False

[html]
directory = htmlcov
